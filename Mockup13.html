<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito de Compras</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .box { border:1px solid #000; padding:2rem; max-width:500px; margin:2rem auto; display:flex; flex-direction:column; gap:1rem; background-color:#fff; }
    .panel-box { border:1px solid #000; padding:1rem; margin-top:1rem; border-radius:0; }
    .success { background-color:#d5e8d4; border-color:#82b366; }
    .error { background-color:#f8d7da; border-color:#c9302c; }
  </style>
</head>
<body>
  <div class="container">

    <div class="box">
      <h3 class="text-center">Agregar al Carrito</h3>

      <!-- Slot 1 -->
      <input type="text" id="productoNombre1" class="form-control mb-2" placeholder="Nombre del producto 1">
      <input type="number" id="cantidad1" class="form-control mb-2" placeholder="Cantidad" min="1" value="1">

      <!-- Slot 2 -->
      <input type="text" id="productoNombre2" class="form-control mb-2" placeholder="Nombre del producto 2">
      <input type="number" id="cantidad2" class="form-control mb-2" placeholder="Cantidad" min="1" value="1">

      <!-- Slot 3 -->
      <input type="text" id="productoNombre3" class="form-control mb-2" placeholder="Nombre del producto 3">
      <input type="number" id="cantidad3" class="form-control mb-2" placeholder="Cantidad" min="1" value="1">

      <button id="btnAgregar" class="btn btn-primary w-100">Agregar al Carrito</button>
    </div>

    <div class="panel-box success" id="carrito-actualizado" style="display:none;">
      <h5>Carrito actualizado</h5>
      <p id="productos-carrito"></p>
    </div>

    <div class="panel-box error" id="producto-agotado" style="display:none;">
      <h5>Producto agotado</h5>
      <p>No hay stock disponible</p>
    </div>

  </div>

  <script>
    const productosDisponibles = [
      { nombre: "Camiseta Roja", stock: 5 },
      { nombre: "Camiseta Azul", stock: 3 },
      { nombre: "Pantalón Negro", stock: 2 },
      { nombre: "Pantalón Verde", stock: 0 } // producto sin stock para escenario 3
    ];

    const carrito = [];

    function agregarProducto(nombre, cantidad) {
      const producto = productosDisponibles.find(p => p.nombre === nombre);

      if (!producto) return alert(`Producto "${nombre}" no existe`);

      if (producto.stock < cantidad) {
        document.getElementById('producto-agotado').style.display = 'block';
        return false;
      }

      const itemCarrito = carrito.find(p => p.nombre === nombre);
      if (itemCarrito) {
        itemCarrito.cantidad += cantidad;
      } else {
        carrito.push({ nombre, cantidad });
      }

      producto.stock -= cantidad;
      return true;
    }

    document.getElementById('btnAgregar').addEventListener('click', () => {
      document.getElementById('carrito-actualizado').style.display = 'none';
      document.getElementById('producto-agotado').style.display = 'none';

      const inputs = [
        { nombre: 'productoNombre1', cantidad: 'cantidad1' },
        { nombre: 'productoNombre2', cantidad: 'cantidad2' },
        { nombre: 'productoNombre3', cantidad: 'cantidad3' }
      ];

      let agregado = false;

      inputs.forEach(slot => {
        const nombre = document.getElementById(slot.nombre).value.trim();
        const cantidad = parseInt(document.getElementById(slot.cantidad).value);

        if (nombre) {
          const exito = agregarProducto(nombre, cantidad);
          if (exito) agregado = true;
        }
      });

      if (agregado) {
        const lista = carrito.map(p => `${p.nombre} x ${p.cantidad}`).join(', ');
        document.getElementById('productos-carrito').innerText = lista;
        document.getElementById('carrito-actualizado').style.display = 'block';
      }
    });
  </script>

</body>
</html>

